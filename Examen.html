<!DOCTYPE html>
<html>
    <head lang="es">
        <meta charset="utf-8"> 
        <meta name="author" content="Sheila ELizabeth Vazquez Chimay"> 
        <meta name="description" content="Pagina web para subir archivos CSV">
        <title>Practica final</title>
        <link rel="stylesheet" type="text/css" href="Examen.css">
    </head>
    <body>
       <h1> Para subir el archivo dale click el boton o arrastralo</h1>
       <div id="buttondiv">
        <input type="file" id="inputfile" class= "form-control" accept="text/csv" required/>
        <input type="button" id="viewfile" value="Import file" onclick="mensaje('No es aceptado este tipo de archivo')"/>
        <input type="button" value="Limpiar" onClick="location.reload();"/>
        <br><br>
      </div>
      <div class="dropzone" id="dropzone">Arrastra el archivo aqui</div>

<br><br><br><br><br><br><br>
    </div>
    <div class="container" id="container">
      <table class="gridtable" id="tableMain">
          <thead>
            
          </thead>
          <tbody>
  
          </tbody>
        </table>
    </div>       
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<!-- Funcion para abrir archivos CSV-->
<script>
    $( document ).ready(function() {

        $('#viewfile').click(function () {
            var rdr = new FileReader();
            rdr.onload = function (e) {
              //get the rows into an array
              var therows = e.target.result.split("\n");
              //loop through the rows
              for (var row = 0; row < therows.length; row ++ ) {
                var columns = therows[row].split(",");
                var colcount = columns.length;

                var newrow="<tr><td>" + columns[0] + "</td>";
                for(var i=1;i<colcount;i++){
                     newrow=newrow+("<td>" + columns[i] + "</td>");
                }
                newrow=newrow+"</tr>"
                $('#tableMain').append(newrow);
              }
            }
            rdr.readAsText($("#inputfile")[0].files[0]);
        });
    });
</script>
<!-- Funcion para crear la pantalla de arrastrar un archivo-->
<script>
    (function(){
        var dropzone = document.getElementById('dropzone');

     dropzone.ondrop = function(e){
         e.preventDefault();
         this.className = 'dropzone';     
     };
     dropzone.ondragover = function(){
         this.className = 'dropzone dragover';
         return false;
     };
     dropzone.ondragleave = function() {
         this.className = 'dropzone';
         return false;
     };
 }());
</script>   
    </body>
</html>